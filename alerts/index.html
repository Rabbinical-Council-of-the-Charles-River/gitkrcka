<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kashrus Alerts</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- Using Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Keep your custom styles if needed, make sure they load AFTER Bootstrap -->
    <link rel="stylesheet" href="../css/vendor/font-awesome.min.css"> <!-- Assuming you still need Font Awesome -->
    <link rel="stylesheet" href="../css/style.css"> <!-- Load your custom styles -->
    <style>
        .hidden {
            display: none !important; /* Use !important to override potential conflicts */
        }
        .alert-card {
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .alert-date {
            font-size: 0.8em;
            color: #777;
            margin-bottom: 10px;
        }
        /* Basic styles for messages */
        .message { padding: 10px; margin-bottom: 15px; border-radius: 4px; display: none; border: 1px solid transparent; }
        .message.info { background-color: #e7f3fe; border-color: #d0eafd; color: #31708f; }
        .message.error { background-color: #f8d7da; border-color: #f5c6cb; color: #721c24; }
        .message.success { background-color: #d4edda; border-color: #c3e6cb; color: #155724; }
        /* Adjustments for BS5 layout if needed */
        .table-title .btn { margin-left: 5px; }
        .table-wrapper { padding: 20px; background: #fff; border-radius: 3px; box-shadow: 0 1px 1px rgba(0,0,0,.05); }
        .table-title h2 { margin: 5px 0 0; font-size: 24px; }
        .table-title .btn i { float: left; font-size: 21px; margin-right: 5px; }
        .table-title .btn span { float: left; margin-top: 2px; }
    </style>
</head>
<body>
    <!-- Login Section -->
    <div id="login-section">
        <div class="container" style="max-width: 400px; margin: 50px auto; background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
            <h1>Admin Access Required</h1>
            <div id="message" class="message"></div>
            <button id="netlify-login-button" class="btn btn-primary w-100"> <!-- Use BS5 button classes -->
                Login with Netlify Identity
            </button>
        </div>
    </div>

    <!-- Admin Content Section -->
    <div id="admin-content" class="hidden">
        <div class="container-fluid mt-4"> <!-- Added margin-top -->
            <div class="table-wrapper">
                <div class="table-title">
                    <div class="row">
                        <div class="col-sm-6">
                            <h2>KRCKA <b>Alerts Manager</b></h2> <a href="https://krcka.rebchardle.org">Home</a>
                        </div>
                        <div class="col-sm-6 text-end"> <!-- Align button to the right -->
                            <!-- Updated button for BS5 modal -->
                            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addAlertModal">
                                <i class="material-icons">&#xE147;</i> <span>Add New Alert</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="alerts-list" class="mt-3"> <!-- Added margin-top -->
                    <!-- Alerts will be loaded here by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Public Alerts Section -->
    <div id="public-alerts" class="hidden">
        <div class="container mt-4"> <!-- Added margin-top -->
            <h2>Kashrus Alerts</h2>
            <div id="public-alerts-list">
                <!-- Public alerts will be loaded here by JS -->
            </div>
        </div>
    </div>

    <!-- Add Alert Modal (Bootstrap 5) -->
    <div class="modal fade" id="addAlertModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="addAlertModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form id="add-alert-form">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addAlertModalLabel">Add Alert</h5>
                        <!-- Updated close button for BS5 -->
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!-- Updated form group for BS5 -->
                        <div class="mb-3">
                            <label for="alert-description" class="form-label">Description</label>
                            <textarea id="alert-description" class="form-control" required></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <!-- Updated buttons for BS5 -->
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Add</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/6.4.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.4.2/firebase-firestore.js"></script>
    <!-- Netlify Identity -->
    <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <!-- Bootstrap 5 Bundle JS CDN (includes Popper) - MUST be loaded before your script that uses it -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Your Custom Alerts Script -->
    <script src="js/alerts.js"></script>
</body>
</html>
